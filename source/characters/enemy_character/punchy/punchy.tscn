[gd_scene load_steps=8 format=3 uid="uid://bnqkg78ob8l43"]

[ext_resource type="PackedScene" uid="uid://2xec1tsfin3i" path="res://source/characters/enemy_character/BasicEnemy.tscn" id="1_r863o"]
[ext_resource type="Script" path="res://source/characters/enemy_character/modules/combat_module.gd" id="3_82tm1"]
[ext_resource type="Script" path="res://source/characters/enemy_character/modules/targeting_module.gd" id="4_iji31"]

[sub_resource type="Animation" id="Animation_7rnex"]
resource_name = "attack"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CombatModule")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"return_to_idle"
}]
}

[sub_resource type="Animation" id="Animation_5rr6v"]
resource_name = "death"
tracks/0/type = "method"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.233333),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"queue_free"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qhj6a"]
_data = {
"attack": SubResource("Animation_7rnex"),
"death": SubResource("Animation_5rr6v")
}

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_xmi7c"]
size = Vector2(1, 10)

[node name="Punchy" instance=ExtResource("1_r863o")]
speed = 150

[node name="CombatModule" type="RayCast2D" parent="." index="4"]
script = ExtResource("3_82tm1")
stagger_threshold = 30.0

[node name="StaggerTimer" type="Timer" parent="CombatModule" index="0"]

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="5"]
libraries = {
"": SubResource("AnimationLibrary_qhj6a")
}

[node name="TargetingModule" type="Node2D" parent="." index="6"]
script = ExtResource("4_iji31")

[node name="Sprite2D" type="Sprite2D" parent="TargetingModule" index="0"]
position = Vector2(0.5, 0)
texture = SubResource("PlaceholderTexture2D_xmi7c")

[connection signal="timeout" from="CombatModule/StaggerTimer" to="CombatModule" method="return_to_idle"]
